<%# Accepts: line_item (required), check (required) %>

<div id="<%= dom_id(line_item, :content) %>" class="d-flex flex-column gap-3">
  <div class="d-flex justify-content-between align-items-start">
    <div class="d-flex align-items-baseline">
      <%= button_to edit_check_line_item_path(check, line_item), method: :get, class: "btn btn-sm btn-outline-secondary me-1", title: "Edit item", form: { data: { turbo_stream: true } } do %>
        <i class="bi bi-pencil small"></i>
      <% end %>
      <%= button_to check_line_item_path(check, line_item), method: :delete, class: "btn btn-sm btn-outline-secondary me-2", title: "Delete item", form: { data: { turbo_confirm: "Delete this item?" } } do %>
        <i class="bi bi-trash small"></i>
      <% end %>
      <span class="text-muted small me-2 text-end" style="min-width: 50px;">$<%= number_with_precision(line_item.unit_price * line_item.quantity, precision: 2) %></span>
      <span>
        <strong class="small"><%= line_item.description %></strong>
        <% if line_item.quantity > 1 %>
          <span class="text-muted small">(<%= line_item.quantity %>x @ $<%= number_with_precision(line_item.unit_price, precision: 2) %> each)</span>
        <% end %>
      </span>
    </div>
    <strong class="small">$<%= number_with_precision(line_item.total_with_addons, precision: 2) %></strong>
  </div>
  <% if line_item.discount && line_item.discount > 0 %>
    <div class="d-flex align-items-baseline">
      <span class="me-2" style="width: 1em;"></span>
      <span class="text-success small me-2 text-end" style="min-width: 50px;">-$<%= number_with_precision(line_item.discount, precision: 2) %></span>
      <span class="text-success small">
        <% if line_item.discount_description.present? %>
          <%= line_item.discount_description %>
        <% else %>
          Discount
        <% end %>
      </span>
    </div>
  <% end %>
</div>
