<%# Accepts: line_item (required), check (required) %>

<div id="<%= dom_id(line_item, :content) %>" class="d-flex flex-column gap-3">
  <%= form_with model: [check, line_item], class: "line-item-form" do |f| %>
      <div class="row g-2 mb-3">
        <div class="col-12 col-sm-6">
          <%= f.label :description, class: "form-label mb-1" %>
          <%= f.text_field :description, class: "form-control form-control-sm" %>
        </div>
        <div class="col-6 col-sm-3">
          <%= f.label :unit_price, "Price", class: "form-label mb-1" %>
          <div class="input-group input-group-sm">
            <span class="input-group-text"><%= check.currency_symbol %></span>
            <%= f.number_field :unit_price, step: 0.01, class: "form-control form-control-sm" %>
          </div>
        </div>
        <div class="col-6 col-sm-3">
          <%= f.label :quantity, "Qty", class: "form-label mb-1" %>
          <%= f.number_field :quantity, min: 1, class: "form-control form-control-sm" %>
        </div>
      </div>

      <div class="row g-2 mb-3">
        <div class="col-6 col-sm-3">
          <%= f.label :discount, class: "form-label mb-1" %>
          <div class="input-group input-group-sm">
            <span class="input-group-text"><%= check.currency_symbol %></span>
            <%= f.number_field :discount, step: 0.01, min: 0, class: "form-control form-control-sm" %>
          </div>
        </div>
        <div class="col-6 col-sm-9">
          <%= f.label :discount_description, "Discount reason", class: "form-label mb-1" %>
          <%= f.text_field :discount_description, class: "form-control form-control-sm", placeholder: "e.g., Comp, Employee discount" %>
        </div>
      </div>

      <div class="d-flex justify-content-between align-items-center">
        <div class="text-muted">
          Total: <%= format_currency(line_item.total_price, check.currency_symbol) %>
        </div>
        <div class="d-flex gap-2">
          <%= link_to "Cancel", check_line_item_path(check, line_item), class: "btn btn-sm btn-secondary", data: { turbo_stream: true } %>
          <%= f.submit "Save", class: "btn btn-sm btn-primary" %>
        </div>
      </div>
  <% end %>
</div>
