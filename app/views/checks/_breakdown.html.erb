<%# Accepts: check (required), participants (optional), line_items (optional) %>
<% participants ||= check.participants.order(:name) %>
<% line_items ||= check.line_items.includes(:participants, :addons).order(:position, :created_at) %>

<div class="card">
  <div class="card-header py-2">
    <strong class="small">Who Owes What</strong>
  </div>
  <div class="list-group list-group-flush">
    <% participants.each do |participant| %>
      <%= render partial: "checks/participant_breakdown", locals: { participant: participant, check: check, line_items: line_items } %>
    <% end %>
  </div>

  <%= render partial: "checks/remaining_breakdown", locals: { check: check, line_items: line_items } %>
</div>
