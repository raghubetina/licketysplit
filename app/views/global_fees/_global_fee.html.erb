<%# Accepts: global_fee (required), check (required), subtotal_after_discounts (optional) %>
<% subtotal_after_discounts ||= check.subtotal - check.total_discounts %>

<li id="<%= dom_id(global_fee) %>" class="list-group-item py-3 px-3">
  <div class="d-flex justify-content-between align-items-center small">
    <div class="d-flex align-items-baseline text-muted">
      <%= button_to edit_check_global_fee_path(check, global_fee), method: :get, class: "btn btn-sm btn-outline-secondary me-1", title: "Edit fee" do %>
        <i class="bi bi-pencil small"></i>
      <% end %>
      <%= button_to check_global_fee_path(check, global_fee), method: :delete, class: "btn btn-sm btn-outline-secondary me-2", title: "Delete fee", form: { data: { turbo_confirm: "Delete this fee?" } } do %>
        <i class="bi bi-trash small"></i>
      <% end %>
      <span>
        <%= global_fee.description %>
        <% if subtotal_after_discounts > 0 %>
          (<%= number_to_percentage((global_fee.amount / subtotal_after_discounts) * 100, precision: 1) %>)
        <% end %>
      </span>
    </div>
    <span>+$<%= number_with_precision(global_fee.amount, precision: 2) %></span>
  </div>
</li>
