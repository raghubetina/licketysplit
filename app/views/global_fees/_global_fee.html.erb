<%# Accepts: global_fee (required), check (required) %>

<li id="<%= dom_id(global_fee) %>" class="list-group-item py-3 px-3">
  <div class="d-flex flex-column gap-1">
    <div class="d-flex justify-content-between align-items-center text-muted">
      <span>
        <%= global_fee.description %>
        <% if global_fee.percentage_base > 0 %>
          (<%= number_to_percentage(global_fee.calculated_percentage, precision: 1) %>)
        <% end %>
      </span>
      <span>+<%= format_currency(global_fee.amount, check.currency_symbol) %></span>
    </div>
    <div class="d-flex gap-2 small">
      <%= link_to "Edit", edit_check_global_fee_path(check, global_fee), class: "text-muted", data: { turbo_stream: true } %>
      <%= link_to "Delete", check_global_fee_path(check, global_fee), class: "text-muted", data: { turbo_method: :delete, turbo_confirm: "Delete this fee?" } %>
    </div>
    <% if global_fee.tip? %>
      <%= render partial: "global_fees/tip_controls", locals: { check: check, current_tip: global_fee } %>
    <% end %>
  </div>
</li>
